use crate::graphics::color::{Color, ColorSelection};
use crate::graphics::image::text::TextConfig;
use crate::graphics::image::RawImage;
use crate::logger::log;
use crate::logger::log_level::LogLevel;
use std::clone::Clone;
use std::collections::HashMap;
use std::iter::Iterator;
use std::sync::{LazyLock, Mutex};

static ALPHABET : LazyLock<Mutex<HashMap<ColorSelection, HashMap<char, Vec<Vec<u8>>>>>> = LazyLock::new(|| Mutex::new(define_by_color()));
static LETTERS : LazyLock<Vec<char>> = LazyLock::new(|| define_low().keys().cloned().collect());

static HEIGHT: usize = 15;
static WIDTH: usize = 13;



pub fn create_generic(config: &TextConfig, message: String) -> RawImage {
    /* make output for the appended letters; prime rows vector with the correct number of sub-vectors */
    let mut rows: Vec<Vec<u8>> = Vec::with_capacity(HEIGHT);
    for _ in 0..HEIGHT {
        rows.push(vec!());
    }

    /* find our alphabet, or create it */
    let key = ColorSelection::new(config.foreground, config.background);
    let mut guard = ALPHABET.lock().unwrap();
    if !guard.contains_key(&key) {
        log(LogLevel::Debug, &|| String::from(format!("dynamically created alphabet: [{:?}],[{:?}]", config.foreground, config.background)));
        guard.insert(key, define_upscaled(config.foreground, config.background));
    }
    let alphabet = guard.get(&key).expect("todo: still can't find alphabet");

    /* iterate over letters in the message */
    for letter in message.chars() {
        let char_data = alphabet.get(&letter).expect("todo: can't find char data");
        for i in 0..HEIGHT {
            let bytes = char_data.get(i).unwrap().clone();
            rows[i].extend(bytes);
        }
    }

    /* the rows array should never be more than the number of rows needed for encoding the characters */
    if rows.len() != HEIGHT {
        panic!("rows.len() should be [{}], but it's [{}]", HEIGHT, rows.len());
    }

    /* copy rows into contiguous array */
    let mut output: Vec<u8> = vec!();
    for row in rows {
        for byte in row {
            output.push(byte);
        }
    }

    /* done */
    RawImage::new((message.len() * WIDTH) as u32, HEIGHT as u32, output)
}

fn define_by_color() -> HashMap<ColorSelection, HashMap<char, Vec<Vec<u8>>>> {
    let mut output = HashMap::new();

    output.insert(ColorSelection::new(Color::RED, Color::TRANSPARENT), define_upscaled(Color::RED, Color::TRANSPARENT));

    output
}

fn define_upscaled(foreground: Color, background: Color) -> HashMap<char, Vec<Vec<u8>>> {
    let mut output = HashMap::new();
    let low = define_low();

    for letter in LETTERS.iter() {
        let mut upscaled = vec!();
        let otherwise = vec![0; HEIGHT];
        let low_rows_u16 = low.get(letter).unwrap_or(&otherwise);
        for word in low_rows_u16 {
            let mut row = vec!();
            for i in 0..WIDTH {
                let bit = ((word.reverse_bits() >> i) & 1) != 0;

                let expanded = if bit {
                    foreground.to_u8()
                } else {
                    background.to_u8()
                };

                row.push(expanded.0);
                row.push(expanded.1);
                row.push(expanded.2);
                row.push(expanded.3);
            }

            if row.len() != WIDTH * 4 {
                panic!("row.len: [{}] != [{}]", row.len(), WIDTH * 4);
            }
            upscaled.push(row);
        }

        if upscaled.len() != HEIGHT {
            panic!("upscaled.len: [{}] != [{}]", upscaled.len(), HEIGHT);
        }
        output.insert(*letter, upscaled);
    }

    log(LogLevel::Debug, &|| String::from(format!("created alphabet: [{:?}],[{:?}]", foreground, background)));
    output
}

fn define_low() -> HashMap<char, Vec<u16>> {
    let mut data = HashMap::new();

    data.insert(' ', vec![
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
    ]);
    data.insert('A',  vec![
        0,
        0b0000111000000000,
        0b0000001000000000,
        0b0000010100000000,
        0b0000010100000000,
        0b0000100010000000,
        0b0000100010000000,
        0b0000111110000000,
        0b0001000001000000,
        0b0001000001000000,
        0b0011100011100000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('B',  vec![
        0,
        0b0001111100000000,
        0b0000100010000000,
        0b0000100010000000,
        0b0000100010000000,
        0b0000111100000000,
        0b0000100010000000,
        0b0000100010000000,
        0b0000100010000000,
        0b0000100010000000,
        0b0001111100000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('C',  vec![
        0,
        0b0000011010000000,
        0b0000100110000000,
        0b0001000010000000,
        0b0001000010000000,
        0b0001000000000000,
        0b0001000000000000,
        0b0001000000000000,
        0b0001000000000000,
        0b0000100010000000,
        0b0000011100000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('D',  vec![
        0,
        0b0011111000000000,
        0b0001000100000000,
        0b0001000010000000,
        0b0001000010000000,
        0b0001000010000000,
        0b0001000010000000,
        0b0001000010000000,
        0b0001000010000000,
        0b0001000100000000,
        0b0011111000000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('E',  vec![
        0,
        0b0001111111000000,
        0b0000100001000000,
        0b0000100000000000,
        0b0000100010000000,
        0b0000111110000000,
        0b0000100010000000,
        0b0000100000000000,
        0b0000100000000000,
        0b0000100001000000,
        0b0001111111000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('F',  vec![
        0,
        0b0001111111000000,
        0b0000100001000000,
        0b0000100000000000,
        0b0000100100000000,
        0b0000111100000000,
        0b0000100100000000,
        0b0000100000000000,
        0b0000100000000000,
        0b0000100000000000,
        0b0001111000000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('G',  vec![
        0,
        0b0000011010000000,
        0b0000100110000000,
        0b0001000010000000,
        0b0001000000000000,
        0b0001000000000000,
        0b0001000111000000,
        0b0001000010000000,
        0b0001000010000000,
        0b0000100010000000,
        0b0000011100000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('H',  vec![
        0,
        0b0011100011100000,
        0b0001000001000000,
        0b0001000001000000,
        0b0001000001000000,
        0b0001111111000000,
        0b0001000001000000,
        0b0001000001000000,
        0b0001000001000000,
        0b0001000001000000,
        0b0011100011100000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('I',  vec![
        0,
        0b0000000111000000,
        0b0000000010000000,
        0b0000000010000000,
        0b0000000010000000,
        0b0000000010000000,
        0b0000000010000000,
        0b0000000010000000,
        0b0000000010000000,
        0b0000000010000000,
        0b0000000111000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('J',  vec![
        0,
        0b0000011111000000,
        0b0000000100000000,
        0b0000000100000000,
        0b0000000100000000,
        0b0000000100000000,
        0b0000000100000000,
        0b0000000100000000,
        0b0001000100000000,
        0b0001000100000000,
        0b0000111000000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('K',  vec![
        0,
        0b0001110111000000,
        0b0000100010000000,
        0b0000100100000000,
        0b0000100100000000,
        0b0000101000000000,
        0b0000111000000000,
        0b0000100100000000,
        0b0000100010000000,
        0b0000100001000000,
        0b0001110001100000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('L',  vec![
        0,
        0b0001111000000000,
        0b0000100000000000,
        0b0000100000000000,
        0b0000100000000000,
        0b0000100000000000,
        0b0000100000000000,
        0b0000100000000000,
        0b0000100000000000,
        0b0000100001000000,
        0b0001111111000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('M',  vec![
        0,
        0b0011000001100000,
        0b0001000001000000,
        0b0001100011000000,
        0b0001100011000000,
        0b0001010101000000,
        0b0001010101000000,
        0b0001001001000000,
        0b0001001001000000,
        0b0001000001000000,
        0b0011100011100000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('N',  vec![
        0,
        0b0011000011100000,
        0b0001000001000000,
        0b0001100001000000,
        0b0001010001000000,
        0b0001010001000000,
        0b0001001001000000,
        0b0001000101000000,
        0b0001000101000000,
        0b0001000011000000,
        0b0011110001000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('O',  vec![
        0,
        0b0000011100000000,
        0b0000100010000000,
        0b0001000001000000,
        0b0001000001000000,
        0b0001000001000000,
        0b0001000001000000,
        0b0001000001000000,
        0b0001000001000000,
        0b0000100010000000,
        0b0000011100000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('P',  vec![
        0,
        0b0001111110000000,
        0b0000100001000000,
        0b0000100001000000,
        0b0000100001000000,
        0b0000100001000000,
        0b0000111110000000,
        0b0000100000000000,
        0b0000100000000000,
        0b0000100000000000,
        0b0001111000000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('Q',  vec![
        0,
        0b0000011100000000,
        0b0000100010000000,
        0b0001000001000000,
        0b0001000001000000,
        0b0001000001000000,
        0b0001000001000000,
        0b0001000001000000,
        0b0001000001000000,
        0b0000100010000000,
        0b0000011100000000,
        0b0000001100000000,
        0b0000110011000000,
        0,
        0,
    ]);
    data.insert('R',  vec![
        0,
        0b0011111100000000,
        0b0001000010000000,
        0b0001000010000000,
        0b0001000010000000,
        0b0001000010000000,
        0b0001111100000000,
        0b0001001000000000,
        0b0001000100000000,
        0b0001000010000000,
        0b0011100011000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('S',  vec![
        0,
        0b0000111101000000,
        0b0001000011000000,
        0b0001000001000000,
        0b0001000000000000,
        0b0000111000000000,
        0b0000000110000000,
        0b0000000001000000,
        0b0001000001000000,
        0b0001100001000000,
        0b0001011110000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('T',  vec![
        0,
        0b0011111111100000,
        0b0010001000100000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000111110000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('U',  vec![
        0,
        0b0011100011100000,
        0b0001000001000000,
        0b0001000001000000,
        0b0001000001000000,
        0b0001000001000000,
        0b0001000001000000,
        0b0001000001000000,
        0b0001000001000000,
        0b0001100011000000,
        0b0000011100000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('V',  vec![
        0,
        0b0011100011100000,
        0b0001000001000000,
        0b0001000001000000,
        0b0000100010000000,
        0b0000100010000000,
        0b0000100010000000,
        0b0000010100000000,
        0b0000010100000000,
        0b0000001000000000,
        0b0000001000000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('W',  vec![
        0,
        0b0011100000111000,
        0b0001000000010000,
        0b0001000100010000,
        0b0001000100010000,
        0b0000101010100000,
        0b0000101010100000,
        0b0000101010100000,
        0b0000010001000000,
        0b0000010001000000,
        0b0000010001000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('X',  vec![
        0,
        0b0011100011100000,
        0b0001000001000000,
        0b0000100010000000,
        0b0000010100000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000010100000000,
        0b0000100010000000,
        0b0001000001000000,
        0b0011100011100000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('Y',  vec![
        0,
        0b0011100011100000,
        0b0001000001000000,
        0b0000100010000000,
        0b0000100010000000,
        0b0000010100000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000111110000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('Z',  vec![
        0b0000000000000000,
        0b0001111111000000,
        0b0001000001000000,
        0b0000000010000000,
        0b0000000100000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000010000000000,
        0b0000100000000000,
        0b0001000001000000,
        0b0001111111000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
    ]);
    data.insert('a',  vec![
        0,
        0,
        0,
        0,
        0b0000011100000000,
        0b0000000010000000,
        0b0000011110000000,
        0b0000100010000000,
        0b0000100010000000,
        0b0000100010000000,
        0b0000011101000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('b',  vec![
        0,
        0b0011000000000000,
        0b0001000000000000,
        0b0001000000000000,
        0b0001011000000000,
        0b0001100100000000,
        0b0001000010000000,
        0b0001000010000000,
        0b0001000010000000,
        0b0001100110000000,
        0b0011011000000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('c',  vec![
        0,
        0,
        0,
        0,
        0b0000111010000000,
        0b0011000110000000,
        0b0010000000000000,
        0b0010000000000000,
        0b0010000000000000,
        0b0011000110000000,
        0b0000111000000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('d',  vec![
        0,
        0b0000001100000000,
        0b0000000100000000,
        0b0000000100000000,
        0b0000110100000000,
        0b0011001100000000,
        0b0010000100000000,
        0b0010000100000000,
        0b0010000100000000,
        0b0011001100000000,
        0b0000110110000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('e',  vec![
        0,
        0,
        0,
        0,
        0b0000111000000000,
        0b0011000110000000,
        0b0010000010000000,
        0b0011111110000000,
        0b0010000000000000,
        0b0011000110000000,
        0b0000111000000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('f',  vec![
        0,
        0b0000111000000000,
        0b0001000100000000,
        0b0001000000000000,
        0b0001000000000000,
        0b0011110000000000,
        0b0001000000000000,
        0b0001000000000000,
        0b0001000000000000,
        0b0001000000000000,
        0b0011110000000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('g',  vec![
        0,
        0,
        0,
        0,
        0b0000110110000000,
        0b0011001100000000,
        0b0010000100000000,
        0b0010000100000000,
        0b0011001100000000,
        0b0000110100000000,
        0b0000000100000000,
        0b0010000100000000,
        0b0010000100000000,
        0b0001111000000000,
        0,
    ]);
    data.insert('h',  vec![
        0,
        0b0011000000000000,
        0b0001000000000000,
        0b0001000000000000,
        0b0001011000000000,
        0b0001100100000000,
        0b0001000100000000,
        0b0001000100000000,
        0b0001000100000000,
        0b0001000100000000,
        0b0011101110000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('i',  vec![
        0,
        0b0000010000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000110000000000,
        0b0000010000000000,
        0b0000010000000000,
        0b0000010000000000,
        0b0000010000000000,
        0b0000010000000000,
        0b0001111100000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('j',  vec![
        0,
        0b0000010000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000111000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0010001000000000,
        0b0001110000000000,
        0,
    ]);
    data.insert('k',  vec![
        0,
        0b0001100000000000,
        0b0000100000000000,
        0b0000100000000000,
        0b0000100111000000,
        0b0000100100000000,
        0b0000101000000000,
        0b0000111000000000,
        0b0000100100000000,
        0b0000100010000000,
        0b0001110111000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('l',  vec![
        0,
        0b0001110000000000,
        0b0000010000000000,
        0b0000010000000000,
        0b0000010000000000,
        0b0000010000000000,
        0b0000010000000000,
        0b0000010000000000,
        0b0000010000000000,
        0b0000010000000000,
        0b0001111100000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('m',  vec![
        0,
        0,
        0,
        0,
        0b0011011011000000,
        0b0001101101000000,
        0b0001001001000000,
        0b0001001001000000,
        0b0001001001000000,
        0b0001001001000000,
        0b0011101101100000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('n',  vec![
        0,
        0,
        0,
        0,
        0b0000110110000000,
        0b0000011001000000,
        0b0000010001000000,
        0b0000010001000000,
        0b0000010001000000,
        0b0000010001000000,
        0b0000111011100000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('o',  vec![
        0,
        0,
        0,
        0,
        0b0000011100000000,
        0b0001100011000000,
        0b0001000001000000,
        0b0001000001000000,
        0b0001000001000000,
        0b0001100011000000,
        0b0000011100000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('p',  vec![
        0,
        0,
        0,
        0,
        0b0001101100000000,
        0b0000110011000000,
        0b0000100001000000,
        0b0000100001000000,
        0b0000100001000000,
        0b0000110011000000,
        0b0000101100000000,
        0b0000100000000000,
        0b0000100000000000,
        0b0001111000000000,
        0,
    ]);
    data.insert('q',  vec![
        0,
        0,
        0,
        0,
        0b0000011011000000,
        0b0001100110000000,
        0b0001000010000000,
        0b0001000010000000,
        0b0001000010000000,
        0b0001100110000000,
        0b0000011010000000,
        0b0000000010000000,
        0b0000000010000000,
        0b0000001111000000,
        0,
    ]);
    data.insert('r',  vec![
        0,
        0,
        0,
        0,
        0b0011101110000000,
        0b0000110001000000,
        0b0000100000000000,
        0b0000100000000000,
        0b0000100000000000,
        0b0000100000000000,
        0b0011111000000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('s',  vec![
        0,
        0,
        0,
        0,
        0b0001111100000000,
        0b0010000010000000,
        0b0010000000000000,
        0b0001111100000000,
        0b0000000010000000,
        0b0010000010000000,
        0b0001111100000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('t',  vec![
        0,
        0b0000000000000000,
        0b0001000000000000,
        0b0001000000000000,
        0b0111111000000000,
        0b0001000000000000,
        0b0001000000000000,
        0b0001000000000000,
        0b0001000000000000,
        0b0001000100000000,
        0b0000111000000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('u',  vec![
        0,
        0,
        0,
        0,
        0b0011001100000000,
        0b0001000100000000,
        0b0001000100000000,
        0b0001000100000000,
        0b0001000100000000,
        0b0001001100000000,
        0b0000110110000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('v',  vec![
        0,
        0,
        0,
        0,
        0b0011100011100000,
        0b0001000001000000,
        0b0000100010000000,
        0b0000100010000000,
        0b0000010100000000,
        0b0000010100000000,
        0b0000001000000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('w',  vec![
        0,
        0,
        0,
        0,
        0b0011101011100000,
        0b0001001001000000,
        0b0001010101000000,
        0b0001010101000000,
        0b0001010101000000,
        0b0000100010000000,
        0b0000100010000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('x',  vec![
        0,
        0,
        0,
        0,
        0b0001110111000000,
        0b0000100010000000,
        0b0000010100000000,
        0b0000001000000000,
        0b0000010100000000,
        0b0000100010000000,
        0b0001110111000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('y',  vec![
        0,
        0,
        0,
        0,
        0b0111000111000000,
        0b0010000010000000,
        0b0001000100000000,
        0b0001000100000000,
        0b0000101000000000,
        0b0000101000000000,
        0b0000010000000000,
        0b0000010000000000,
        0b0000100000000000,
        0b0011000000000000,
        0,
    ]);
    data.insert('z',  vec![
        0,
        0,
        0,
        0,
        0b0001111111000000,
        0b0001000010000000,
        0b0000000100000000,
        0b0000001000000000,
        0b0000010000000000,
        0b0000100001000000,
        0b0001111111000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('0',  vec![
        0,
        0b0000111100000000,
        0b0001000010000000,
        0b0001000010000000,
        0b0001000010000000,
        0b0001000010000000,
        0b0001000010000000,
        0b0001000010000000,
        0b0001000010000000,
        0b0001000010000000,
        0b0000111100000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('1',  vec![
        0,
        0b0000010000000000,
        0b0001110000000000,
        0b0000010000000000,
        0b0000010000000000,
        0b0000010000000000,
        0b0000010000000000,
        0b0000010000000000,
        0b0000010000000000,
        0b0000010000000000,
        0b0001111100000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('2',  vec![
        0,
        0b0000111100000000,
        0b0001000010000000,
        0b0000000010000000,
        0b0000000010000000,
        0b0000000100000000,
        0b0000001000000000,
        0b0000010000000000,
        0b0000100000000000,
        0b0001000000000000,
        0b0001111110000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('3',  vec![
        0,
        0b0000111100000000,
        0b0001000010000000,
        0b0000000010000000,
        0b0000000010000000,
        0b0000011100000000,
        0b0000000010000000,
        0b0000000010000000,
        0b0000000010000000,
        0b0001000010000000,
        0b0000111100000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('4',  vec![
        0,
        0b0000010000000000,
        0b0000110000000000,
        0b0001010000000000,
        0b0001010000000000,
        0b0010010000000000,
        0b0100010000000000,
        0b0111111000000000,
        0b0000010000000000,
        0b0000010000000000,
        0b0000111000000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('5',  vec![
        0,
        0b0001111110000000,
        0b0001000000000000,
        0b0001000000000000,
        0b0001000000000000,
        0b0001111100000000,
        0b0000000010000000,
        0b0000000010000000,
        0b0000000010000000,
        0b0001000010000000,
        0b0000111100000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('6',  vec![
        0,
        0b0000011100000000,
        0b0000100000000000,
        0b0001000000000000,
        0b0001000000000000,
        0b0001011100000000,
        0b0001100010000000,
        0b0001000010000000,
        0b0001000010000000,
        0b0001000010000000,
        0b0000111100000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('7',  vec![
        0,
        0b0001111110000000,
        0b0001000010000000,
        0b0000000100000000,
        0b0000000100000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000010000000000,
        0b0000010000000000,
        0b0000100000000000,
        0b0000100000000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('8',  vec![
        0,
        0b0001111000000000,
        0b0010000100000000,
        0b0010000100000000,
        0b0010000100000000,
        0b0001111000000000,
        0b0010000100000000,
        0b0010000100000000,
        0b0010000100000000,
        0b0010000100000000,
        0b0001111000000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('9',  vec![
        0,
        0b0000111100000000,
        0b0001000010000000,
        0b0001000010000000,
        0b0001000010000000,
        0b0001000110000000,
        0b0000111010000000,
        0b0000000010000000,
        0b0000000010000000,
        0b0000000100000000,
        0b0000111000000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('!',  vec![
        0,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000000000000000,
        0b0000001000000000,
        0,
        0,
        0,
        0,
    ]);
    data.insert('"',  vec![
        0b0000100100000000,
        0b0000100100000000,
        0b0000100100000000,
        0b0000100100000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
    ]);
    data.insert('#',  vec![
        0b0000001001000000,
        0b0000001001000000,
        0b0000001001000000,
        0b0000111111100000,
        0b0000010010000000,
        0b0000010010000000,
        0b0000010010000000,
        0b0001111111000000,
        0b0000100100000000,
        0b0000100100000000,
        0b0000100100000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
    ]);
    data.insert('$',  vec![
        0b0000001000000000,
        0b0000111110000000,
        0b0001000001000000,
        0b0001000000000000,
        0b0001000000000000,
        0b0000111110000000,
        0b0000000001000000,
        0b0000000001000000,
        0b0001000001000000,
        0b0000111110000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
    ]);
    data.insert('%',  vec![
        0b0000110000010000,
        0b0001001000100000,
        0b0000110001000000,
        0b0000000010000000,
        0b0000000100000000,
        0b0000001000000000,
        0b0000010001100000,
        0b0000100010010000,
        0b0001000001100000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
    ]);
    data.insert('&',  vec![
        0b0000011100000000,
        0b0000100010000000,
        0b0000100000000000,
        0b0000100000000000,
        0b0000010000000000,
        0b0000101000000000,
        0b0001000100100000,
        0b0001000011000000,
        0b0001000011000000,
        0b0000111100100000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
    ]);
    data.insert('\'', vec![
        0b0000100000000000,
        0b0000100000000000,
        0b0000100000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
    ]);
    data.insert('(',  vec![
        0b0000000001000000,
        0b0000000010000000,
        0b0000000010000000,
        0b0000000100000000,
        0b0000000100000000,
        0b0000000100000000,
        0b0000000100000000,
        0b0000000100000000,
        0b0000000100000000,
        0b0000000100000000,
        0b0000000100000000,
        0b0000000100000000,
        0b0000000010000000,
        0b0000000010000000,
        0b0000000001000000,
    ]);
    data.insert(')',  vec![
        0b0000010000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000000100000000,
        0b0000000100000000,
        0b0000000100000000,
        0b0000000100000000,
        0b0000000100000000,
        0b0000000100000000,
        0b0000000100000000,
        0b0000000100000000,
        0b0000000100000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000010000000000,
    ]);
    data.insert('*',  vec![
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000011011000000,
        0b0000001110000000,
        0b0000111111100000,
        0b0000001110000000,
        0b0000011011000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
    ]);
    data.insert('+',  vec![
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000100000000,
        0b0000000100000000,
        0b0000000100000000,
        0b0000111111100000,
        0b0000000100000000,
        0b0000000100000000,
        0b0000000100000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
    ]);
    data.insert(',',  vec![
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000011100000000,
        0b0000011000000000,
        0b0000110000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
    ]);
    data.insert('-',  vec![
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000111110000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
    ]);
    data.insert('.',  vec![
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000011000000000,
        0b0000011000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
    ]);
    data.insert('/',  vec![
        0b0000000000000000,
        0b0000000000100000,
        0b0000000001000000,
        0b0000000010000000,
        0b0000000100000000,
        0b0000001000000000,
        0b0000010000000000,
        0b0000100000000000,
        0b0001000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
    ]);
    data.insert('[',  vec![
        0b0000001110000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001110000000,
    ]);
    data.insert('\\', vec![
        0b0000000000000000,
        0b0001000000000000,
        0b0000100000000000,
        0b0000010000000000,
        0b0000001000000000,
        0b0000000100000000,
        0b0000000010000000,
        0b0000000001000000,
        0b0000000000100000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
    ]);
    data.insert(']',  vec![
        0b0000111000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000111000000000,
    ]);
    data.insert('^',  vec![
        0b0000001000000000,
        0b0000010100000000,
        0b0000100010000000,
        0b0001000001000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
    ]);
    data.insert('_',  vec![
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0011111111100000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
    ]);
    data.insert('`',  vec![
        0b0001000000000000,
        0b0000100000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
    ]);
    data.insert('{',  vec![
        0b0000000110000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000110000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000000110000000,
        0b0000000000000000,
        0b0000000000000000,
    ]);
    data.insert('|',  vec![
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000000000000000,
        0b0000000000000000,
    ]);
    data.insert('}',  vec![
        0b0000110000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000000110000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000110000000000,
        0b0000000000000000,
        0b0000000000000000,
    ]);
    data.insert('~',  vec![
        0b0000011000100000,
        0b0000100100100000,
        0b0000100011000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
    ]);
    data.insert(':',  vec![
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000011000000000,
        0b0000011000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000011000000000,
        0b0000011000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
    ]);
    data.insert(';',  vec![
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000011000000000,
        0b0000011000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000011100000000,
        0b0000011000000000,
        0b0000110000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
    ]);
    data.insert('<',  vec![
        0b0000000000000000,
        0b0000000100000000,
        0b0000001000000000,
        0b0000010000000000,
        0b0000100000000000,
        0b0001000000000000,
        0b0000100000000000,
        0b0000010000000000,
        0b0000001000000000,
        0b0000000100000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
    ]);
    data.insert('=',  vec![
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000111110000000,
        0b0000000000000000,
        0b0000111110000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
    ]);
    data.insert('>',  vec![
        0b0000000000000000,
        0b0001000000000000,
        0b0000100000000000,
        0b0000010000000000,
        0b0000001000000000,
        0b0000000100000000,
        0b0000001000000000,
        0b0000010000000000,
        0b0000100000000000,
        0b0001000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
    ]);
    data.insert('?',  vec![
        0b0000111110000000,
        0b0001000001000000,
        0b0000000001000000,
        0b0000000001000000,
        0b0000000010000000,
        0b0000000100000000,
        0b0000001000000000,
        0b0000001000000000,
        0b0000000000000000,
        0b0000001000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
    ]);
    data.insert('@',  vec![
        0,
        0b0000111100000000,
        0b0001000010000000,
        0b0010000001000000,
        0b0010011101000000,
        0b0010100101000000,
        0b0010100101000000,
        0b0010100101000000,
        0b0010011010000000,
        0b0010000000000000,
        0b0001000000000000,
        0b0000111110000000,
        0,
        0,
        0,
    ]);

    data
}

#[cfg(test)]
mod tests {
    use crate::graphics::color::Color;
    use crate::graphics::image::text::generic::{create_generic, HEIGHT, WIDTH};
    use crate::graphics::image::text::{TextConfig, Typeface};

    fn assert_eq_color(color: Color, bytes: Vec<u8>) {
        assert_eq!(4, bytes.len());
        let (a, b, c, d) = color.to_u8();
        assert_eq!(a, bytes[0]);
        assert_eq!(b, bytes[1]);
        assert_eq!(c, bytes[2]);
        assert_eq!(d, bytes[3]);
    }

    #[test]
    fn one_letter() {
        let config = TextConfig {
            typeface: Typeface::Generic,
            foreground: Color::RED,
            background: Color::TRANSPARENT,
        };
        let mut image = create_generic(&config, "A".parse().unwrap());

        assert_eq!(780, image.data.len());
        assert_eq!(HEIGHT * WIDTH * 4, image.data.len());

        /* assert first row (WIDTH*4)=52 bytes; all 0, so all TRANSPARENT (255,255,255,0) */
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));

        /* assert second row; 0b00  00111000000  000 */
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::RED, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::RED, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::RED, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));

        /* assert 3rd row; 0b00  00001000000  000 */
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::RED, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));

        /* assert 4th row; 0b00  00010100000  000 */
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::RED, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::RED, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));

        /* assert 5th row; 0b00  00010100000  000 */
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::RED, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::RED, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));

        /* assert 6th row; 0b00  00100010000  000 */
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::RED, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::RED, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));

        /* assert 7th row; 0b00  00100010000  000 */
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::RED, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::RED, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));

        /* assert 8th row; 0b00  00111110000  000 */
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::RED, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::RED, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::RED, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::RED, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::RED, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));

        /* assert 9th row; 0b00  01000001000  000 */
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::RED, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::RED, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));

        /* assert 10th row; 0b00  01000001000  000 */
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::RED, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::RED, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));

        /* assert 11th row; 0b00  11100011100  000 */
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::RED, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::RED, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::RED, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::RED, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::RED, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::RED, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));

        /* assert 12th row; 0 */
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));

        /* assert 13th row; 0 */
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));

        /* assert 14th row; 0 */
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));

        /* assert 15th row; 0 */
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));
        assert_eq_color(Color::TRANSPARENT, Vec::from(image.data.drain(0..4).as_slice()));

        /* data should now be empty */
        assert_eq!(0, image.data.len());
    }

    #[test]
    fn two_letters() {
        let config = TextConfig {
            typeface: Typeface::Generic,
            foreground: Color::RED,
            background: Color::TRANSPARENT,
        };
        let image = create_generic(&config, "AB".parse().unwrap());

        assert_eq!(780*2, image.data.len());
        assert_eq!(HEIGHT * WIDTH * 4 * 2, image.data.len());
    }
}
